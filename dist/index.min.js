"use strict";(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PTcp = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2PTcp=(()=>{var _i=Object.create;var ge=Object.defineProperty;var Ni=Object.getOwnPropertyDescriptor;var Li=Object.getOwnPropertyNames;var Ui=Object.getPrototypeOf,ji=Object.prototype.hasOwnProperty;var vt=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),st=(e,t)=>{for(var r in t)ge(e,r,{get:t[r],enumerable:!0})},Dn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Li(t))!ji.call(e,i)&&i!==r&&ge(e,i,{get:()=>t[i],enumerable:!(n=Ni(t,i))||n.enumerable});return e};var V=(e,t,r)=>(r=e!=null?_i(Ui(e)):{},Dn(t||!e||!e.__esModule?ge(r,"default",{value:e,enumerable:!0}):r,e)),Vi=e=>Dn(ge({},"__esModule",{value:!0}),e);var Vn=_((vf,jn)=>{jn.exports=Ar;var Un=128,ou=127,iu=~ou,au=Math.pow(2,31);function Ar(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw Ar.bytes=0,new RangeError("Could not encode varint");t=t||[],r=r||0;for(var n=r;e>=au;)t[r++]=e&255|Un,e/=128;for(;e&iu;)t[r++]=e&255|Un,e>>>=7;return t[r]=e|0,Ar.bytes=r-n+1,t}});var Gn=_((Ef,qn)=>{qn.exports=Br;var uu=128,zn=127;function Br(e,n){var r=0,n=n||0,i=0,c=n,f,h=e.length;do{if(c>=h||i>49)throw Br.bytes=0,new RangeError("Could not decode varint");f=e[c++],r+=i<28?(f&zn)<<i:(f&zn)*Math.pow(2,i),i+=7}while(f>=uu);return Br.bytes=c-n,r}});var Zn=_((Cf,Hn)=>{var cu=Math.pow(2,7),fu=Math.pow(2,14),pu=Math.pow(2,21),lu=Math.pow(2,28),hu=Math.pow(2,35),du=Math.pow(2,42),mu=Math.pow(2,49),Du=Math.pow(2,56),gu=Math.pow(2,63);Hn.exports=function(e){return e<cu?1:e<fu?2:e<pu?3:e<lu?4:e<hu?5:e<du?6:e<mu?7:e<Du?8:e<gu?9:10}});var Ae=_((xf,Wn)=>{Wn.exports={encode:Vn(),decode:Gn(),encodingLength:Zn()}});var Me=_((jf,ns)=>{"use strict";function rs(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Mu(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return rs(e,r)}catch{r.message=e.message,r.stack=e.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),rs(new i,r)}}ns.exports=Mu});var Ds=_((Kf,ms)=>{var Wt=1e3,Jt=Wt*60,Xt=Jt*60,$t=Xt*24,ju=$t*7,Vu=$t*365.25;ms.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return zu(e);if(r==="number"&&isFinite(e))return t.long?Gu(e):qu(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function zu(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Vu;case"weeks":case"week":case"w":return r*ju;case"days":case"day":case"d":return r*$t;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Xt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Jt;case"seconds":case"second":case"secs":case"sec":case"s":return r*Wt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function qu(e){var t=Math.abs(e);return t>=$t?Math.round(e/$t)+"d":t>=Xt?Math.round(e/Xt)+"h":t>=Jt?Math.round(e/Jt)+"m":t>=Wt?Math.round(e/Wt)+"s":e+"ms"}function Gu(e){var t=Math.abs(e);return t>=$t?Pe(e,t,$t,"day"):t>=Xt?Pe(e,t,Xt,"hour"):t>=Jt?Pe(e,t,Jt,"minute"):t>=Wt?Pe(e,t,Wt,"second"):e+" ms"}function Pe(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Nr=_((tp,gs)=>{function Hu(e){r.debug=r,r.default=r,r.coerce=m,r.disable=c,r.enable=i,r.enabled=f,r.humanize=Ds(),r.destroy=w,Object.keys(e).forEach(p=>{r[p]=e[p]}),r.names=[],r.skips=[],r.formatters={};function t(p){let b=0;for(let v=0;v<p.length;v++)b=(b<<5)-b+p.charCodeAt(v),b|=0;return r.colors[Math.abs(b)%r.colors.length]}r.selectColor=t;function r(p){let b,v=null,C,g;function T(...B){if(!T.enabled)return;let x=T,A=Number(new Date),$=A-(b||A);x.diff=$,x.prev=b,x.curr=A,b=A,B[0]=r.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");let L=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,(K,X)=>{if(K==="%%")return"%";L++;let tt=r.formatters[X];if(typeof tt=="function"){let ct=B[L];K=tt.call(x,ct),B.splice(L,1),L--}return K}),r.formatArgs.call(x,B),(x.log||r.log).apply(x,B)}return T.namespace=p,T.useColors=r.useColors(),T.color=r.selectColor(p),T.extend=n,T.destroy=r.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>v!==null?v:(C!==r.namespaces&&(C=r.namespaces,g=r.enabled(p)),g),set:B=>{v=B}}),typeof r.init=="function"&&r.init(T),T}function n(p,b){let v=r(this.namespace+(typeof b>"u"?":":b)+p);return v.log=this.log,v}function i(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let b,v=(typeof p=="string"?p:"").split(/[\s,]+/),C=v.length;for(b=0;b<C;b++)!v[b]||(p=v[b].replace(/\*/g,".*?"),p[0]==="-"?r.skips.push(new RegExp("^"+p.slice(1)+"$")):r.names.push(new RegExp("^"+p+"$")))}function c(){let p=[...r.names.map(h),...r.skips.map(h).map(b=>"-"+b)].join(",");return r.enable(""),p}function f(p){if(p[p.length-1]==="*")return!0;let b,v;for(b=0,v=r.skips.length;b<v;b++)if(r.skips[b].test(p))return!1;for(b=0,v=r.names.length;b<v;b++)if(r.names[b].test(p))return!0;return!1}function h(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function m(p){return p instanceof Error?p.stack||p.message:p}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}gs.exports=Hu});var bs=_((ot,$e)=>{ot.formatArgs=Wu;ot.save=Ju;ot.load=Xu;ot.useColors=Zu;ot.storage=Yu();ot.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ot.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Zu(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Wu(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+$e.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}ot.log=console.debug||console.log||(()=>{});function Ju(e){try{e?ot.storage.setItem("debug",e):ot.storage.removeItem("debug")}catch{}}function Xu(){let e;try{e=ot.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Yu(){try{return localStorage}catch{}}$e.exports=Nr()(ot);var{formatters:Qu}=$e.exports;Qu.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var ws=_((ep,ys)=>{"use strict";ys.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Cs=_((rp,Es)=>{"use strict";var Ku=vt("os"),vs=vt("tty"),ut=ws(),{env:z}=process,Tt;ut("no-color")||ut("no-colors")||ut("color=false")||ut("color=never")?Tt=0:(ut("color")||ut("colors")||ut("color=true")||ut("color=always"))&&(Tt=1);"FORCE_COLOR"in z&&(z.FORCE_COLOR==="true"?Tt=1:z.FORCE_COLOR==="false"?Tt=0:Tt=z.FORCE_COLOR.length===0?1:Math.min(parseInt(z.FORCE_COLOR,10),3));function Lr(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Ur(e,t){if(Tt===0)return 0;if(ut("color=16m")||ut("color=full")||ut("color=truecolor"))return 3;if(ut("color=256"))return 2;if(e&&!t&&Tt===void 0)return 0;let r=Tt||0;if(z.TERM==="dumb")return r;if(process.platform==="win32"){let n=Ku.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in z)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in z)||z.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in z)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(z.TEAMCITY_VERSION)?1:0;if(z.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in z){let n=parseInt((z.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(z.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(z.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(z.TERM)||"COLORTERM"in z?1:r}function tc(e){let t=Ur(e,e&&e.isTTY);return Lr(t)}Es.exports={supportsColor:tc,stdout:Lr(Ur(!0,vs.isatty(1))),stderr:Lr(Ur(!0,vs.isatty(2)))}});var Ss=_((q,_e)=>{var ec=vt("tty"),ke=vt("util");q.init=uc;q.log=oc;q.formatArgs=nc;q.save=ic;q.load=ac;q.useColors=rc;q.destroy=ke.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");q.colors=[6,2,3,4,5,1];try{let e=Cs();e&&(e.stderr||e).level>=2&&(q.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}q.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,c)=>c.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function rc(){return"colors"in q.inspectOpts?Boolean(q.inspectOpts.colors):ec.isatty(process.stderr.fd)}function nc(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),c=`  ${i};1m${t} \x1B[0m`;e[0]=c+e[0].split(`
`).join(`
`+c),e.push(i+"m+"+_e.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=sc()+t+" "+e[0]}function sc(){return q.inspectOpts.hideDate?"":new Date().toISOString()+" "}function oc(...e){return process.stderr.write(ke.format(...e)+`
`)}function ic(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function ac(){return process.env.DEBUG}function uc(e){e.inspectOpts={};let t=Object.keys(q.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=q.inspectOpts[t[r]]}_e.exports=Nr()(q);var{formatters:xs}=_e.exports;xs.o=function(e){return this.inspectOpts.colors=this.useColors,ke.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};xs.O=function(e){return this.inspectOpts.colors=this.useColors,ke.inspect(e,this.inspectOpts)}});var Ts=_((np,jr)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?jr.exports=bs():jr.exports=Ss()});var Ne=_((hp,Bs)=>{Bs.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}();throw new Error("unknown stream")}});var Rs=_((dp,Is)=>{Is.exports=function(t){if(t){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}});var zr=_((mp,Ms)=>{var cc=Rs();Ms.exports=e=>async t=>{t=cc(t);let r=x=>{typeof x.return=="function"&&x.return()},n=null,i=null,c=x=>{n=x,i&&i(x),r(t)},f=null,h=!1,m=()=>{h=!0,f&&f()},w=null,p=!1,b=()=>{p=!0,w&&w()},v=null,C=()=>{v&&v()},g=()=>new Promise((x,A)=>{f=v=x,i=A,e.once("drain",C)}),T=()=>(r(t),new Promise((x,A)=>{if(h||p||n)return x();w=f=x,i=A})),B=()=>{e.removeListener("error",c),e.removeListener("close",m),e.removeListener("finish",b),e.removeListener("drain",C)};e.once("error",c),e.once("close",m),e.once("finish",b);try{for await(let x of t){if(!e.writable||e.destroyed||n)break;e.write(x)===!1&&await g()}}catch(x){n||e.destroy(),n=x}try{if(e.writable&&e.end(),await T(),n)throw n}finally{B()}}});var qr=_((Dp,Fs)=>{var fc=zr(),pc=Ne();Fs.exports=e=>({sink:fc(e),source:pc(e)})});var Ps=_((gp,Os)=>{var lc=qr();Os.exports=e=>async function*(t){let r=lc(e),n;if(r.sink(t).catch(i=>{n=i}),yield*r.source,n)throw n}});var $s=_((bp,Yt)=>{Yt.exports=Ne();Yt.exports.source=Ne();Yt.exports.sink=zr();Yt.exports.transform=Ps();Yt.exports.duplex=qr()});var Hr=_((je,Ns)=>{(function(){var e,t=0xdeadbeefcafe,r=(t&16777215)==15715070;function n(s,o,a){s!=null&&(typeof s=="number"?this.fromNumber(s,o,a):o==null&&typeof s!="string"?this.fromString(s,256):this.fromString(s,o))}function i(){return new n(null)}function c(s,o,a,u,l,d){for(;--d>=0;){var D=o*this[s++]+a[u]+l;l=Math.floor(D/67108864),a[u++]=D&67108863}return l}function f(s,o,a,u,l,d){for(var D=o&32767,y=o>>15;--d>=0;){var R=this[s]&32767,j=this[s++]>>15,it=y*R+j*D;R=D*R+((it&32767)<<15)+a[u]+(l&1073741823),l=(R>>>30)+(it>>>15)+y*j+(l>>>30),a[u++]=R&1073741823}return l}function h(s,o,a,u,l,d){for(var D=o&16383,y=o>>14;--d>=0;){var R=this[s]&16383,j=this[s++]>>14,it=y*R+j*D;R=D*R+((it&16383)<<14)+a[u]+l,l=(R>>28)+(it>>14)+y*j,a[u++]=R&268435455}return l}var m=typeof navigator<"u";m&&r&&navigator.appName=="Microsoft Internet Explorer"?(n.prototype.am=f,e=30):m&&r&&navigator.appName!="Netscape"?(n.prototype.am=c,e=26):(n.prototype.am=h,e=28),n.prototype.DB=e,n.prototype.DM=(1<<e)-1,n.prototype.DV=1<<e;var w=52;n.prototype.FV=Math.pow(2,w),n.prototype.F1=w-e,n.prototype.F2=2*e-w;var p="0123456789abcdefghijklmnopqrstuvwxyz",b=new Array,v,C;for(v="0".charCodeAt(0),C=0;C<=9;++C)b[v++]=C;for(v="a".charCodeAt(0),C=10;C<36;++C)b[v++]=C;for(v="A".charCodeAt(0),C=10;C<36;++C)b[v++]=C;function g(s){return p.charAt(s)}function T(s,o){var a=b[s.charCodeAt(o)];return a??-1}function B(s){for(var o=this.t-1;o>=0;--o)s[o]=this[o];s.t=this.t,s.s=this.s}function x(s){this.t=1,this.s=s<0?-1:0,s>0?this[0]=s:s<-1?this[0]=s+this.DV:this.t=0}function A(s){var o=i();return o.fromInt(s),o}function $(s,o){var a;if(o==16)a=4;else if(o==8)a=3;else if(o==256)a=8;else if(o==2)a=1;else if(o==32)a=5;else if(o==4)a=2;else{this.fromRadix(s,o);return}this.t=0,this.s=0;for(var u=s.length,l=!1,d=0;--u>=0;){var D=a==8?s[u]&255:T(s,u);if(D<0){s.charAt(u)=="-"&&(l=!0);continue}l=!1,d==0?this[this.t++]=D:d+a>this.DB?(this[this.t-1]|=(D&(1<<this.DB-d)-1)<<d,this[this.t++]=D>>this.DB-d):this[this.t-1]|=D<<d,d+=a,d>=this.DB&&(d-=this.DB)}a==8&&(s[0]&128)!=0&&(this.s=-1,d>0&&(this[this.t-1]|=(1<<this.DB-d)-1<<d)),this.clamp(),l&&n.ZERO.subTo(this,this)}function L(){for(var s=this.s&this.DM;this.t>0&&this[this.t-1]==s;)--this.t}function et(s){if(this.s<0)return"-"+this.negate().toString(s);var o;if(s==16)o=4;else if(s==8)o=3;else if(s==2)o=1;else if(s==32)o=5;else if(s==4)o=2;else return this.toRadix(s);var a=(1<<o)-1,u,l=!1,d="",D=this.t,y=this.DB-D*this.DB%o;if(D-- >0)for(y<this.DB&&(u=this[D]>>y)>0&&(l=!0,d=g(u));D>=0;)y<o?(u=(this[D]&(1<<y)-1)<<o-y,u|=this[--D]>>(y+=this.DB-o)):(u=this[D]>>(y-=o)&a,y<=0&&(y+=this.DB,--D)),u>0&&(l=!0),l&&(d+=g(u));return l?d:"0"}function K(){var s=i();return n.ZERO.subTo(this,s),s}function X(){return this.s<0?this.negate():this}function tt(s){var o=this.s-s.s;if(o!=0)return o;var a=this.t;if(o=a-s.t,o!=0)return this.s<0?-o:o;for(;--a>=0;)if((o=this[a]-s[a])!=0)return o;return 0}function ct(s){var o=1,a;return(a=s>>>16)!=0&&(s=a,o+=16),(a=s>>8)!=0&&(s=a,o+=8),(a=s>>4)!=0&&(s=a,o+=4),(a=s>>2)!=0&&(s=a,o+=2),(a=s>>1)!=0&&(s=a,o+=1),o}function ro(){return this.t<=0?0:this.DB*(this.t-1)+ct(this[this.t-1]^this.s&this.DM)}function no(s,o){var a;for(a=this.t-1;a>=0;--a)o[a+s]=this[a];for(a=s-1;a>=0;--a)o[a]=0;o.t=this.t+s,o.s=this.s}function so(s,o){for(var a=s;a<this.t;++a)o[a-s]=this[a];o.t=Math.max(this.t-s,0),o.s=this.s}function oo(s,o){var a=s%this.DB,u=this.DB-a,l=(1<<u)-1,d=Math.floor(s/this.DB),D=this.s<<a&this.DM,y;for(y=this.t-1;y>=0;--y)o[y+d+1]=this[y]>>u|D,D=(this[y]&l)<<a;for(y=d-1;y>=0;--y)o[y]=0;o[d]=D,o.t=this.t+d+1,o.s=this.s,o.clamp()}function io(s,o){o.s=this.s;var a=Math.floor(s/this.DB);if(a>=this.t){o.t=0;return}var u=s%this.DB,l=this.DB-u,d=(1<<u)-1;o[0]=this[a]>>u;for(var D=a+1;D<this.t;++D)o[D-a-1]|=(this[D]&d)<<l,o[D-a]=this[D]>>u;u>0&&(o[this.t-a-1]|=(this.s&d)<<l),o.t=this.t-a,o.clamp()}function ao(s,o){for(var a=0,u=0,l=Math.min(s.t,this.t);a<l;)u+=this[a]-s[a],o[a++]=u&this.DM,u>>=this.DB;if(s.t<this.t){for(u-=s.s;a<this.t;)u+=this[a],o[a++]=u&this.DM,u>>=this.DB;u+=this.s}else{for(u+=this.s;a<s.t;)u-=s[a],o[a++]=u&this.DM,u>>=this.DB;u-=s.s}o.s=u<0?-1:0,u<-1?o[a++]=this.DV+u:u>0&&(o[a++]=u),o.t=a,o.clamp()}function uo(s,o){var a=this.abs(),u=s.abs(),l=a.t;for(o.t=l+u.t;--l>=0;)o[l]=0;for(l=0;l<u.t;++l)o[l+a.t]=a.am(0,u[l],o,l,0,a.t);o.s=0,o.clamp(),this.s!=s.s&&n.ZERO.subTo(o,o)}function co(s){for(var o=this.abs(),a=s.t=2*o.t;--a>=0;)s[a]=0;for(a=0;a<o.t-1;++a){var u=o.am(a,o[a],s,2*a,0,1);(s[a+o.t]+=o.am(a+1,2*o[a],s,2*a+1,u,o.t-a-1))>=o.DV&&(s[a+o.t]-=o.DV,s[a+o.t+1]=1)}s.t>0&&(s[s.t-1]+=o.am(a,o[a],s,2*a,0,1)),s.s=0,s.clamp()}function fo(s,o,a){var u=s.abs();if(!(u.t<=0)){var l=this.abs();if(l.t<u.t){o?.fromInt(0),a!=null&&this.copyTo(a);return}a==null&&(a=i());var d=i(),D=this.s,y=s.s,R=this.DB-ct(u[u.t-1]);R>0?(u.lShiftTo(R,d),l.lShiftTo(R,a)):(u.copyTo(d),l.copyTo(a));var j=d.t,it=d[j-1];if(it!=0){var nt=it*(1<<this.F1)+(j>1?d[j-2]>>this.F2:0),gt=this.FV/nt,me=(1<<this.F1)/nt,pt=1<<this.F2,lt=a.t,De=lt-j,wt=o??i();for(d.dlShiftTo(De,wt),a.compareTo(wt)>=0&&(a[a.t++]=1,a.subTo(wt,a)),n.ONE.dlShiftTo(j,wt),wt.subTo(d,d);d.t<j;)d[d.t++]=0;for(;--De>=0;){var tr=a[--lt]==it?this.DM:Math.floor(a[lt]*gt+(a[lt-1]+pt)*me);if((a[lt]+=d.am(0,tr,a,De,0,j))<tr)for(d.dlShiftTo(De,wt),a.subTo(wt,a);a[lt]<--tr;)a.subTo(wt,a)}o!=null&&(a.drShiftTo(j,o),D!=y&&n.ZERO.subTo(o,o)),a.t=j,a.clamp(),R>0&&a.rShiftTo(R,a),D<0&&n.ZERO.subTo(a,a)}}}function po(s){var o=i();return this.abs().divRemTo(s,null,o),this.s<0&&o.compareTo(n.ZERO)>0&&s.subTo(o,o),o}function It(s){this.m=s}function lo(s){return s.s<0||s.compareTo(this.m)>=0?s.mod(this.m):s}function ho(s){return s}function mo(s){s.divRemTo(this.m,null,s)}function Do(s,o,a){s.multiplyTo(o,a),this.reduce(a)}function go(s,o){s.squareTo(o),this.reduce(o)}It.prototype.convert=lo,It.prototype.revert=ho,It.prototype.reduce=mo,It.prototype.mulTo=Do,It.prototype.sqrTo=go;function bo(){if(this.t<1)return 0;var s=this[0];if((s&1)==0)return 0;var o=s&3;return o=o*(2-(s&15)*o)&15,o=o*(2-(s&255)*o)&255,o=o*(2-((s&65535)*o&65535))&65535,o=o*(2-s*o%this.DV)%this.DV,o>0?this.DV-o:-o}function Rt(s){this.m=s,this.mp=s.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<s.DB-15)-1,this.mt2=2*s.t}function yo(s){var o=i();return s.abs().dlShiftTo(this.m.t,o),o.divRemTo(this.m,null,o),s.s<0&&o.compareTo(n.ZERO)>0&&this.m.subTo(o,o),o}function wo(s){var o=i();return s.copyTo(o),this.reduce(o),o}function vo(s){for(;s.t<=this.mt2;)s[s.t++]=0;for(var o=0;o<this.m.t;++o){var a=s[o]&32767,u=a*this.mpl+((a*this.mph+(s[o]>>15)*this.mpl&this.um)<<15)&s.DM;for(a=o+this.m.t,s[a]+=this.m.am(0,u,s,o,0,this.m.t);s[a]>=s.DV;)s[a]-=s.DV,s[++a]++}s.clamp(),s.drShiftTo(this.m.t,s),s.compareTo(this.m)>=0&&s.subTo(this.m,s)}function Eo(s,o){s.squareTo(o),this.reduce(o)}function Co(s,o,a){s.multiplyTo(o,a),this.reduce(a)}Rt.prototype.convert=yo,Rt.prototype.revert=wo,Rt.prototype.reduce=vo,Rt.prototype.mulTo=Co,Rt.prototype.sqrTo=Eo;function xo(){return(this.t>0?this[0]&1:this.s)==0}function So(s,o){if(s>4294967295||s<1)return n.ONE;var a=i(),u=i(),l=o.convert(this),d=ct(s)-1;for(l.copyTo(a);--d>=0;)if(o.sqrTo(a,u),(s&1<<d)>0)o.mulTo(u,l,a);else{var D=a;a=u,u=D}return o.revert(a)}function To(s,o){var a;return s<256||o.isEven()?a=new It(o):a=new Rt(o),this.exp(s,a)}n.prototype.copyTo=B,n.prototype.fromInt=x,n.prototype.fromString=$,n.prototype.clamp=L,n.prototype.dlShiftTo=no,n.prototype.drShiftTo=so,n.prototype.lShiftTo=oo,n.prototype.rShiftTo=io,n.prototype.subTo=ao,n.prototype.multiplyTo=uo,n.prototype.squareTo=co,n.prototype.divRemTo=fo,n.prototype.invDigit=bo,n.prototype.isEven=xo,n.prototype.exp=So,n.prototype.toString=et,n.prototype.negate=K,n.prototype.abs=X,n.prototype.compareTo=tt,n.prototype.bitLength=ro,n.prototype.mod=po,n.prototype.modPowInt=To,n.ZERO=A(0),n.ONE=A(1);function Ao(){var s=i();return this.copyTo(s),s}function Bo(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Io(){return this.t==0?this.s:this[0]<<24>>24}function Ro(){return this.t==0?this.s:this[0]<<16>>16}function Mo(s){return Math.floor(Math.LN2*this.DB/Math.log(s))}function Fo(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Oo(s){if(s==null&&(s=10),this.signum()==0||s<2||s>36)return"0";var o=this.chunkSize(s),a=Math.pow(s,o),u=A(a),l=i(),d=i(),D="";for(this.divRemTo(u,l,d);l.signum()>0;)D=(a+d.intValue()).toString(s).substr(1)+D,l.divRemTo(u,l,d);return d.intValue().toString(s)+D}function Po(s,o){this.fromInt(0),o==null&&(o=10);for(var a=this.chunkSize(o),u=Math.pow(o,a),l=!1,d=0,D=0,y=0;y<s.length;++y){var R=T(s,y);if(R<0){s.charAt(y)=="-"&&this.signum()==0&&(l=!0);continue}D=o*D+R,++d>=a&&(this.dMultiply(u),this.dAddOffset(D,0),d=0,D=0)}d>0&&(this.dMultiply(Math.pow(o,d)),this.dAddOffset(D,0)),l&&n.ZERO.subTo(this,this)}function $o(s,o,a){if(typeof o=="number")if(s<2)this.fromInt(1);else for(this.fromNumber(s,a),this.testBit(s-1)||this.bitwiseTo(n.ONE.shiftLeft(s-1),Xe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(o);)this.dAddOffset(2,0),this.bitLength()>s&&this.subTo(n.ONE.shiftLeft(s-1),this);else{var u=new Array,l=s&7;u.length=(s>>3)+1,o.nextBytes(u),l>0?u[0]&=(1<<l)-1:u[0]=0,this.fromString(u,256)}}function ko(){var s=this.t,o=new Array;o[0]=this.s;var a=this.DB-s*this.DB%8,u,l=0;if(s-- >0)for(a<this.DB&&(u=this[s]>>a)!=(this.s&this.DM)>>a&&(o[l++]=u|this.s<<this.DB-a);s>=0;)a<8?(u=(this[s]&(1<<a)-1)<<8-a,u|=this[--s]>>(a+=this.DB-8)):(u=this[s]>>(a-=8)&255,a<=0&&(a+=this.DB,--s)),(u&128)!=0&&(u|=-256),l==0&&(this.s&128)!=(u&128)&&++l,(l>0||u!=this.s)&&(o[l++]=u);return o}function _o(s){return this.compareTo(s)==0}function No(s){return this.compareTo(s)<0?this:s}function Lo(s){return this.compareTo(s)>0?this:s}function Uo(s,o,a){var u,l,d=Math.min(s.t,this.t);for(u=0;u<d;++u)a[u]=o(this[u],s[u]);if(s.t<this.t){for(l=s.s&this.DM,u=d;u<this.t;++u)a[u]=o(this[u],l);a.t=this.t}else{for(l=this.s&this.DM,u=d;u<s.t;++u)a[u]=o(l,s[u]);a.t=s.t}a.s=o(this.s,s.s),a.clamp()}function jo(s,o){return s&o}function Vo(s){var o=i();return this.bitwiseTo(s,jo,o),o}function Xe(s,o){return s|o}function zo(s){var o=i();return this.bitwiseTo(s,Xe,o),o}function fn(s,o){return s^o}function qo(s){var o=i();return this.bitwiseTo(s,fn,o),o}function pn(s,o){return s&~o}function Go(s){var o=i();return this.bitwiseTo(s,pn,o),o}function Ho(){for(var s=i(),o=0;o<this.t;++o)s[o]=this.DM&~this[o];return s.t=this.t,s.s=~this.s,s}function Zo(s){var o=i();return s<0?this.rShiftTo(-s,o):this.lShiftTo(s,o),o}function Wo(s){var o=i();return s<0?this.lShiftTo(-s,o):this.rShiftTo(s,o),o}function Jo(s){if(s==0)return-1;var o=0;return(s&65535)==0&&(s>>=16,o+=16),(s&255)==0&&(s>>=8,o+=8),(s&15)==0&&(s>>=4,o+=4),(s&3)==0&&(s>>=2,o+=2),(s&1)==0&&++o,o}function Xo(){for(var s=0;s<this.t;++s)if(this[s]!=0)return s*this.DB+Jo(this[s]);return this.s<0?this.t*this.DB:-1}function Yo(s){for(var o=0;s!=0;)s&=s-1,++o;return o}function Qo(){for(var s=0,o=this.s&this.DM,a=0;a<this.t;++a)s+=Yo(this[a]^o);return s}function Ko(s){var o=Math.floor(s/this.DB);return o>=this.t?this.s!=0:(this[o]&1<<s%this.DB)!=0}function ti(s,o){var a=n.ONE.shiftLeft(s);return this.bitwiseTo(a,o,a),a}function ei(s){return this.changeBit(s,Xe)}function ri(s){return this.changeBit(s,pn)}function ni(s){return this.changeBit(s,fn)}function si(s,o){for(var a=0,u=0,l=Math.min(s.t,this.t);a<l;)u+=this[a]+s[a],o[a++]=u&this.DM,u>>=this.DB;if(s.t<this.t){for(u+=s.s;a<this.t;)u+=this[a],o[a++]=u&this.DM,u>>=this.DB;u+=this.s}else{for(u+=this.s;a<s.t;)u+=s[a],o[a++]=u&this.DM,u>>=this.DB;u+=s.s}o.s=u<0?-1:0,u>0?o[a++]=u:u<-1&&(o[a++]=this.DV+u),o.t=a,o.clamp()}function oi(s){var o=i();return this.addTo(s,o),o}function ii(s){var o=i();return this.subTo(s,o),o}function ai(s){var o=i();return this.multiplyTo(s,o),o}function ui(){var s=i();return this.squareTo(s),s}function ci(s){var o=i();return this.divRemTo(s,o,null),o}function fi(s){var o=i();return this.divRemTo(s,null,o),o}function pi(s){var o=i(),a=i();return this.divRemTo(s,o,a),new Array(o,a)}function li(s){this[this.t]=this.am(0,s-1,this,0,0,this.t),++this.t,this.clamp()}function hi(s,o){if(s!=0){for(;this.t<=o;)this[this.t++]=0;for(this[o]+=s;this[o]>=this.DV;)this[o]-=this.DV,++o>=this.t&&(this[this.t++]=0),++this[o]}}function ee(){}function ln(s){return s}function di(s,o,a){s.multiplyTo(o,a)}function mi(s,o){s.squareTo(o)}ee.prototype.convert=ln,ee.prototype.revert=ln,ee.prototype.mulTo=di,ee.prototype.sqrTo=mi;function Di(s){return this.exp(s,new ee)}function gi(s,o,a){var u=Math.min(this.t+s.t,o);for(a.s=0,a.t=u;u>0;)a[--u]=0;var l;for(l=a.t-this.t;u<l;++u)a[u+this.t]=this.am(0,s[u],a,u,0,this.t);for(l=Math.min(s.t,o);u<l;++u)this.am(0,s[u],a,u,0,o-u);a.clamp()}function bi(s,o,a){--o;var u=a.t=this.t+s.t-o;for(a.s=0;--u>=0;)a[u]=0;for(u=Math.max(o-this.t,0);u<s.t;++u)a[this.t+u-o]=this.am(o-u,s[u],a,0,0,this.t+u-o);a.clamp(),a.drShiftTo(1,a)}function Mt(s){this.r2=i(),this.q3=i(),n.ONE.dlShiftTo(2*s.t,this.r2),this.mu=this.r2.divide(s),this.m=s}function yi(s){if(s.s<0||s.t>2*this.m.t)return s.mod(this.m);if(s.compareTo(this.m)<0)return s;var o=i();return s.copyTo(o),this.reduce(o),o}function wi(s){return s}function vi(s){for(s.drShiftTo(this.m.t-1,this.r2),s.t>this.m.t+1&&(s.t=this.m.t+1,s.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);s.compareTo(this.r2)<0;)s.dAddOffset(1,this.m.t+1);for(s.subTo(this.r2,s);s.compareTo(this.m)>=0;)s.subTo(this.m,s)}function Ei(s,o){s.squareTo(o),this.reduce(o)}function Ci(s,o,a){s.multiplyTo(o,a),this.reduce(a)}Mt.prototype.convert=yi,Mt.prototype.revert=wi,Mt.prototype.reduce=vi,Mt.prototype.mulTo=Ci,Mt.prototype.sqrTo=Ei;function xi(s,o){var a=s.bitLength(),u,l=A(1),d;if(a<=0)return l;a<18?u=1:a<48?u=3:a<144?u=4:a<768?u=5:u=6,a<8?d=new It(o):o.isEven()?d=new Mt(o):d=new Rt(o);var D=new Array,y=3,R=u-1,j=(1<<u)-1;if(D[1]=d.convert(this),u>1){var it=i();for(d.sqrTo(D[1],it);y<=j;)D[y]=i(),d.mulTo(it,D[y-2],D[y]),y+=2}var nt=s.t-1,gt,me=!0,pt=i(),lt;for(a=ct(s[nt])-1;nt>=0;){for(a>=R?gt=s[nt]>>a-R&j:(gt=(s[nt]&(1<<a+1)-1)<<R-a,nt>0&&(gt|=s[nt-1]>>this.DB+a-R)),y=u;(gt&1)==0;)gt>>=1,--y;if((a-=y)<0&&(a+=this.DB,--nt),me)D[gt].copyTo(l),me=!1;else{for(;y>1;)d.sqrTo(l,pt),d.sqrTo(pt,l),y-=2;y>0?d.sqrTo(l,pt):(lt=l,l=pt,pt=lt),d.mulTo(pt,D[gt],l)}for(;nt>=0&&(s[nt]&1<<a)==0;)d.sqrTo(l,pt),lt=l,l=pt,pt=lt,--a<0&&(a=this.DB-1,--nt)}return d.revert(l)}function Si(s){var o=this.s<0?this.negate():this.clone(),a=s.s<0?s.negate():s.clone();if(o.compareTo(a)<0){var u=o;o=a,a=u}var l=o.getLowestSetBit(),d=a.getLowestSetBit();if(d<0)return o;for(l<d&&(d=l),d>0&&(o.rShiftTo(d,o),a.rShiftTo(d,a));o.signum()>0;)(l=o.getLowestSetBit())>0&&o.rShiftTo(l,o),(l=a.getLowestSetBit())>0&&a.rShiftTo(l,a),o.compareTo(a)>=0?(o.subTo(a,o),o.rShiftTo(1,o)):(a.subTo(o,a),a.rShiftTo(1,a));return d>0&&a.lShiftTo(d,a),a}function Ti(s){if(s<=0)return 0;var o=this.DV%s,a=this.s<0?s-1:0;if(this.t>0)if(o==0)a=this[0]%s;else for(var u=this.t-1;u>=0;--u)a=(o*a+this[u])%s;return a}function Ai(s){var o=s.isEven();if(this.isEven()&&o||s.signum()==0)return n.ZERO;for(var a=s.clone(),u=this.clone(),l=A(1),d=A(0),D=A(0),y=A(1);a.signum()!=0;){for(;a.isEven();)a.rShiftTo(1,a),o?((!l.isEven()||!d.isEven())&&(l.addTo(this,l),d.subTo(s,d)),l.rShiftTo(1,l)):d.isEven()||d.subTo(s,d),d.rShiftTo(1,d);for(;u.isEven();)u.rShiftTo(1,u),o?((!D.isEven()||!y.isEven())&&(D.addTo(this,D),y.subTo(s,y)),D.rShiftTo(1,D)):y.isEven()||y.subTo(s,y),y.rShiftTo(1,y);a.compareTo(u)>=0?(a.subTo(u,a),o&&l.subTo(D,l),d.subTo(y,d)):(u.subTo(a,u),o&&D.subTo(l,D),y.subTo(d,y))}if(u.compareTo(n.ONE)!=0)return n.ZERO;if(y.compareTo(s)>=0)return y.subtract(s);if(y.signum()<0)y.addTo(s,y);else return y;return y.signum()<0?y.add(s):y}var Y=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Bi=(1<<26)/Y[Y.length-1];function Ii(s){var o,a=this.abs();if(a.t==1&&a[0]<=Y[Y.length-1]){for(o=0;o<Y.length;++o)if(a[0]==Y[o])return!0;return!1}if(a.isEven())return!1;for(o=1;o<Y.length;){for(var u=Y[o],l=o+1;l<Y.length&&u<Bi;)u*=Y[l++];for(u=a.modInt(u);o<l;)if(u%Y[o++]==0)return!1}return a.millerRabin(s)}function Ri(s){var o=this.subtract(n.ONE),a=o.getLowestSetBit();if(a<=0)return!1;var u=o.shiftRight(a);s=s+1>>1,s>Y.length&&(s=Y.length);for(var l=i(),d=0;d<s;++d){l.fromInt(Y[Math.floor(Math.random()*Y.length)]);var D=l.modPow(u,this);if(D.compareTo(n.ONE)!=0&&D.compareTo(o)!=0){for(var y=1;y++<a&&D.compareTo(o)!=0;)if(D=D.modPowInt(2,this),D.compareTo(n.ONE)==0)return!1;if(D.compareTo(o)!=0)return!1}}return!0}n.prototype.chunkSize=Mo,n.prototype.toRadix=Oo,n.prototype.fromRadix=Po,n.prototype.fromNumber=$o,n.prototype.bitwiseTo=Uo,n.prototype.changeBit=ti,n.prototype.addTo=si,n.prototype.dMultiply=li,n.prototype.dAddOffset=hi,n.prototype.multiplyLowerTo=gi,n.prototype.multiplyUpperTo=bi,n.prototype.modInt=Ti,n.prototype.millerRabin=Ri,n.prototype.clone=Ao,n.prototype.intValue=Bo,n.prototype.byteValue=Io,n.prototype.shortValue=Ro,n.prototype.signum=Fo,n.prototype.toByteArray=ko,n.prototype.equals=_o,n.prototype.min=No,n.prototype.max=Lo,n.prototype.and=Vo,n.prototype.or=zo,n.prototype.xor=qo,n.prototype.andNot=Go,n.prototype.not=Ho,n.prototype.shiftLeft=Zo,n.prototype.shiftRight=Wo,n.prototype.getLowestSetBit=Xo,n.prototype.bitCount=Qo,n.prototype.testBit=Ko,n.prototype.setBit=ei,n.prototype.clearBit=ri,n.prototype.flipBit=ni,n.prototype.add=oi,n.prototype.subtract=ii,n.prototype.multiply=ai,n.prototype.divide=ci,n.prototype.remainder=fi,n.prototype.divideAndRemainder=pi,n.prototype.modPow=xi,n.prototype.modInverse=Ai,n.prototype.pow=Di,n.prototype.gcd=Si,n.prototype.isProbablePrime=Ii,n.prototype.square=ui,n.prototype.Barrett=Mt;var de,rt,U;function Mi(s){rt[U++]^=s&255,rt[U++]^=s>>8&255,rt[U++]^=s>>16&255,rt[U++]^=s>>24&255,U>=Ke&&(U-=Ke)}function hn(){Mi(new Date().getTime())}if(rt==null){rt=new Array,U=0;var ft;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var dn=new Uint8Array(32);for(window.crypto.getRandomValues(dn),ft=0;ft<32;++ft)rt[U++]=dn[ft]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var mn=window.crypto.random(32);for(ft=0;ft<mn.length;++ft)rt[U++]=mn.charCodeAt(ft)&255}}for(;U<Ke;)ft=Math.floor(65536*Math.random()),rt[U++]=ft>>>8,rt[U++]=ft&255;U=0,hn()}function Fi(){if(de==null){for(hn(),de=ki(),de.init(rt),U=0;U<rt.length;++U)rt[U]=0;U=0}return de.next()}function Oi(s){var o;for(o=0;o<s.length;++o)s[o]=Fi()}function Ye(){}Ye.prototype.nextBytes=Oi;function Qe(){this.i=0,this.j=0,this.S=new Array}function Pi(s){var o,a,u;for(o=0;o<256;++o)this.S[o]=o;for(a=0,o=0;o<256;++o)a=a+this.S[o]+s[o%s.length]&255,u=this.S[o],this.S[o]=this.S[a],this.S[a]=u;this.i=0,this.j=0}function $i(){var s;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,s=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=s,this.S[s+this.S[this.i]&255]}Qe.prototype.init=Pi,Qe.prototype.next=$i;function ki(){return new Qe}var Ke=256;typeof je<"u"?je=Ns.exports={default:n,BigInteger:n,SecureRandom:Ye}:this.jsbn={BigInteger:n,SecureRandom:Ye}}).call(je)});var le=_(Ve=>{(function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(f){return n(c(f),arguments)}function r(f,h){return t.apply(null,[f].concat(h||[]))}function n(f,h){var m=1,w=f.length,p,b="",v,C,g,T,B,x,A,$;for(v=0;v<w;v++)if(typeof f[v]=="string")b+=f[v];else if(typeof f[v]=="object"){if(g=f[v],g.keys)for(p=h[m],C=0;C<g.keys.length;C++){if(p==null)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[C],g.keys[C-1]));p=p[g.keys[C]]}else g.param_no?p=h[g.param_no]:p=h[m++];if(e.not_type.test(g.type)&&e.not_primitive.test(g.type)&&p instanceof Function&&(p=p()),e.numeric_arg.test(g.type)&&typeof p!="number"&&isNaN(p))throw new TypeError(t("[sprintf] expecting number but found %T",p));switch(e.number.test(g.type)&&(A=p>=0),g.type){case"b":p=parseInt(p,10).toString(2);break;case"c":p=String.fromCharCode(parseInt(p,10));break;case"d":case"i":p=parseInt(p,10);break;case"j":p=JSON.stringify(p,null,g.width?parseInt(g.width):0);break;case"e":p=g.precision?parseFloat(p).toExponential(g.precision):parseFloat(p).toExponential();break;case"f":p=g.precision?parseFloat(p).toFixed(g.precision):parseFloat(p);break;case"g":p=g.precision?String(Number(p.toPrecision(g.precision))):parseFloat(p);break;case"o":p=(parseInt(p,10)>>>0).toString(8);break;case"s":p=String(p),p=g.precision?p.substring(0,g.precision):p;break;case"t":p=String(!!p),p=g.precision?p.substring(0,g.precision):p;break;case"T":p=Object.prototype.toString.call(p).slice(8,-1).toLowerCase(),p=g.precision?p.substring(0,g.precision):p;break;case"u":p=parseInt(p,10)>>>0;break;case"v":p=p.valueOf(),p=g.precision?p.substring(0,g.precision):p;break;case"x":p=(parseInt(p,10)>>>0).toString(16);break;case"X":p=(parseInt(p,10)>>>0).toString(16).toUpperCase();break}e.json.test(g.type)?b+=p:(e.number.test(g.type)&&(!A||g.sign)?($=A?"+":"-",p=p.toString().replace(e.sign,"")):$="",B=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",x=g.width-($+p).length,T=g.width&&x>0?B.repeat(x):"",b+=g.align?$+p+T:B==="0"?$+T+p:T+$+p)}return b}var i=Object.create(null);function c(f){if(i[f])return i[f];for(var h=f,m,w=[],p=0;h;){if((m=e.text.exec(h))!==null)w.push(m[0]);else if((m=e.modulo.exec(h))!==null)w.push("%");else if((m=e.placeholder.exec(h))!==null){if(m[2]){p|=1;var b=[],v=m[2],C=[];if((C=e.key.exec(v))!==null)for(b.push(C[1]);(v=v.substring(C[0].length))!=="";)if((C=e.key_access.exec(v))!==null)b.push(C[1]);else if((C=e.index_access.exec(v))!==null)b.push(C[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");m[2]=b}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");w.push({placeholder:m[0],param_no:m[1],keys:m[2],sign:m[3],pad_char:m[4],align:m[5],width:m[6],precision:m[7],type:m[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");h=h.substring(m[0].length)}return i[f]=w}typeof Ve<"u"&&(Ve.sprintf=t,Ve.vsprintf=r),typeof window<"u"&&(window.sprintf=t,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:t,vsprintf:r}}))})()});var Sc={};st(Sc,{TCP:()=>cn});var to=V(vt("net"),1);var gn="[a-fA-F\\d:]",Et=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${gn})|(?<=${gn})(?=\\s|$))`:"",ht="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",N="[a-fA-F\\d]{1,4}",be=`
(?:
(?:${N}:){7}(?:${N}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${N}:){6}(?:${ht}|:${N}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${N}:){5}(?::${ht}|(?::${N}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${N}:){4}(?:(?::${N}){0,1}:${ht}|(?::${N}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${N}:){3}(?:(?::${N}){0,2}:${ht}|(?::${N}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${N}:){2}(?:(?::${N}){0,3}:${ht}|(?::${N}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${N}:){1}(?:(?::${N}){0,4}:${ht}|(?::${N}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${N}){0,5}:${ht}|(?::${N}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),zi=new RegExp(`(?:^${ht}$)|(?:^${be}$)`),qi=new RegExp(`^${ht}$`),Gi=new RegExp(`^${be}$`),er=e=>e&&e.exact?zi:new RegExp(`(?:${Et(e)}${ht}${Et(e)})|(?:${Et(e)}${be}${Et(e)})`,"g");er.v4=e=>e&&e.exact?qi:new RegExp(`${Et(e)}${ht}${Et(e)}`,"g");er.v6=e=>e&&e.exact?Gi:new RegExp(`${Et(e)}${be}${Et(e)}`,"g");var ye=er;function we(e){return ye({exact:!0}).test(e)}function bn(e){return ye.v6({exact:!0}).test(e)}function yn(e){return ye.v4({exact:!0}).test(e)}var ir={};st(ir,{identity:()=>Yi});function Hi(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var c=e.charAt(i),f=c.charCodeAt(0);if(r[f]!==255)throw new TypeError(c+" is ambiguous");r[f]=i}var h=e.length,m=e.charAt(0),w=Math.log(h)/Math.log(256),p=Math.log(256)/Math.log(h);function b(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var T=0,B=0,x=0,A=g.length;x!==A&&g[x]===0;)x++,T++;for(var $=(A-x)*p+1>>>0,L=new Uint8Array($);x!==A;){for(var et=g[x],K=0,X=$-1;(et!==0||K<B)&&X!==-1;X--,K++)et+=256*L[X]>>>0,L[X]=et%h>>>0,et=et/h>>>0;if(et!==0)throw new Error("Non-zero carry");B=K,x++}for(var tt=$-B;tt!==$&&L[tt]===0;)tt++;for(var ct=m.repeat(T);tt<$;++tt)ct+=e.charAt(L[tt]);return ct}function v(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var T=0;if(g[T]!==" "){for(var B=0,x=0;g[T]===m;)B++,T++;for(var A=(g.length-T)*w+1>>>0,$=new Uint8Array(A);g[T];){var L=r[g.charCodeAt(T)];if(L===255)return;for(var et=0,K=A-1;(L!==0||et<x)&&K!==-1;K--,et++)L+=h*$[K]>>>0,$[K]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");x=et,T++}if(g[T]!==" "){for(var X=A-x;X!==A&&$[X]===0;)X++;for(var tt=new Uint8Array(B+(A-X)),ct=B;X!==A;)tt[ct++]=$[X++];return tt}}}function C(g){var T=v(g);if(T)return T;throw new Error(`Non-${t} character`)}return{encode:b,decodeUnsafe:v,decode:C}}var Zi=Hi,Wi=Zi,wn=Wi;var Mc=new Uint8Array(0);var vn=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},at=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var En=e=>new TextEncoder().encode(e),Cn=e=>new TextDecoder().decode(e);var rr=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},nr=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Sn(this,t)}},sr=class{constructor(t){this.decoders=t}or(t){return Sn(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Sn=(e,t)=>new sr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),or=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new rr(t,r,n),this.decoder=new nr(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},jt=({name:e,prefix:t,encode:r,decode:n})=>new or(e,t,r,n),Ct=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=wn(r,t);return jt({prefix:e,name:t,encode:n,decode:c=>at(i(c))})},Ji=(e,t,r,n)=>{let i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let c=e.length;for(;e[c-1]==="=";)--c;let f=new Uint8Array(c*r/8|0),h=0,m=0,w=0;for(let p=0;p<c;++p){let b=i[e[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<r|b,h+=r,h>=8&&(h-=8,f[w++]=255&m>>h)}if(h>=r||255&m<<8-h)throw new SyntaxError("Unexpected end of data");return f},Xi=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,c="",f=0,h=0;for(let m=0;m<e.length;++m)for(h=h<<8|e[m],f+=8;f>r;)f-=r,c+=t[i&h>>f];if(f&&(c+=t[i&h<<r-f]),n)for(;c.length*r&7;)c+="=";return c},O=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>jt({prefix:t,name:e,encode(i){return Xi(i,n,r)},decode(i){return Ji(i,n,r,e)}});var Yi=jt({prefix:"\0",name:"identity",encode:e=>Cn(e),decode:e=>En(e)});var ar={};st(ar,{base2:()=>Qi});var Qi=O({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ur={};st(ur,{base8:()=>Ki});var Ki=O({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var cr={};st(cr,{base10:()=>ta});var ta=Ct({prefix:"9",name:"base10",alphabet:"0123456789"});var fr={};st(fr,{base16:()=>ea,base16upper:()=>ra});var ea=O({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ra=O({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var pr={};st(pr,{base32:()=>dt,base32hex:()=>ia,base32hexpad:()=>ua,base32hexpadupper:()=>ca,base32hexupper:()=>aa,base32pad:()=>sa,base32padupper:()=>oa,base32upper:()=>na,base32z:()=>fa});var dt=O({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),na=O({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sa=O({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oa=O({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ia=O({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aa=O({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ua=O({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ca=O({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fa=O({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lr={};st(lr,{base36:()=>pa,base36upper:()=>la});var pa=Ct({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),la=Ct({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var hr={};st(hr,{base58btc:()=>G,base58flickr:()=>ha});var G=Ct({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ha=Ct({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mr={};st(mr,{base64:()=>dr,base64pad:()=>da,base64url:()=>ma,base64urlpad:()=>Da});var dr=O({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),da=O({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ma=O({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Da=O({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Dr={};st(Dr,{base256emoji:()=>va});var Tn=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ga=Tn.reduce((e,t,r)=>(e[r]=t,e),[]),ba=Tn.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function ya(e){return e.reduce((t,r)=>(t+=ga[r],t),"")}function wa(e){let t=[];for(let r of e){let n=ba[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var va=jt({prefix:"\u{1F680}",name:"base256emoji",encode:ya,decode:wa});var vr={};st(vr,{sha256:()=>Ua,sha512:()=>ja});var wr=V(vt("crypto"),1);var Ea=In,An=128,Ca=127,xa=~Ca,Sa=Math.pow(2,31);function In(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Sa;)t[r++]=e&255|An,e/=128;for(;e&xa;)t[r++]=e&255|An,e>>>=7;return t[r]=e|0,In.bytes=r-n+1,t}var Ta=gr,Aa=128,Bn=127;function gr(e,n){var r=0,n=n||0,i=0,c=n,f,h=e.length;do{if(c>=h)throw gr.bytes=0,new RangeError("Could not decode varint");f=e[c++],r+=i<28?(f&Bn)<<i:(f&Bn)*Math.pow(2,i),i+=7}while(f>=Aa);return gr.bytes=c-n,r}var Ba=Math.pow(2,7),Ia=Math.pow(2,14),Ra=Math.pow(2,21),Ma=Math.pow(2,28),Fa=Math.pow(2,35),Oa=Math.pow(2,42),Pa=Math.pow(2,49),$a=Math.pow(2,56),ka=Math.pow(2,63),_a=function(e){return e<Ba?1:e<Ia?2:e<Ra?3:e<Ma?4:e<Fa?5:e<Oa?6:e<Pa?7:e<$a?8:e<ka?9:10},Na={encode:Ea,decode:Ta,encodingLength:_a},La=Na,re=La;var ne=e=>[re.decode(e),re.decode.bytes],Vt=(e,t,r=0)=>(re.encode(e,t,r),t),zt=e=>re.encodingLength(e);var Ft=(e,t)=>{let r=t.byteLength,n=zt(e),i=n+zt(r),c=new Uint8Array(i+r);return Vt(e,c,0),Vt(r,c,n),c.set(t,i),new qt(e,r,t,c)},Ee=e=>{let t=at(e),[r,n]=ne(t),[i,c]=ne(t.subarray(n)),f=t.subarray(n+c);if(f.byteLength!==i)throw new Error("Incorrect length");return new qt(r,i,f,t)},Rn=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&vn(e.bytes,t.bytes),qt=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}};var yr=({name:e,code:t,encode:r})=>new br(e,t,r),br=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?Ft(this.code,r):r.then(n=>Ft(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Ua=yr({name:"sha2-256",code:18,encode:e=>at(wr.default.createHash("sha256").update(e).digest())}),ja=yr({name:"sha2-512",code:19,encode:e=>at(wr.default.createHash("sha512").update(e).digest())});var Er={};st(Er,{identity:()=>qa});var Fn=0,Va="identity",On=at,za=e=>Ft(Fn,On(e)),qa={code:Fn,name:Va,encode:On,digest:za};var Kc=new TextEncoder,tf=new TextDecoder;var F=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:xe,byteLength:xe,code:Ce,version:Ce,multihash:Ce,bytes:Ce,_baseCache:xe,asCID:xe})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==se)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Xa)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return F.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Ft(t,r);return F.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&Rn(this.multihash,t.multihash)}toString(t){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return Wa(r,i,t||G.encoder);default:return Ja(r,i,t||dt.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return Qa(/^0\.0/,Ka),!!(t&&(t[$n]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof F)return t;if(t!=null&&t.asCID===t){let{version:r,code:n,multihash:i,bytes:c}=t;return new F(r,n,i,c||Pn(r,n,i.bytes))}else if(t!=null&&t[$n]===!0){let{version:r,multihash:n,code:i}=t,c=Ee(n);return F.create(r,i,c)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==se)throw new Error(`Version 0 CID must use dag-pb (code: ${se}) block encoding`);return new F(t,r,n,n.bytes)}case 1:{let i=Pn(t,r,n.bytes);return new F(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return F.create(0,se,t)}static createV1(t,r){return F.create(1,t,r)}static decode(t){let[r,n]=F.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=F.inspectBytes(t),n=r.size-r.multihashSize,i=at(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let c=i.subarray(r.multihashSize-r.digestSize),f=new qt(r.multihashCode,r.digestSize,c,i);return[r.version===0?F.createV0(f):F.createV1(r.codec,f),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[b,v]=ne(t.subarray(r));return r+=v,b},i=n(),c=se;if(i===18?(i=0,r=0):i===1&&(c=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let f=r,h=n(),m=n(),w=r+m,p=w-f;return{version:i,codec:c,multihashCode:h,digestSize:m,multihashSize:p,size:w}}static parse(t,r){let[n,i]=Za(t,r),c=F.decode(i);return c._baseCache.set(n,t),c}},Za=(e,t)=>{switch(e[0]){case"Q":{let r=t||G;return[G.prefix,r.decode(`${G.prefix}${e}`)]}case G.prefix:{let r=t||G;return[G.prefix,r.decode(e)]}case dt.prefix:{let r=t||dt;return[dt.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},Wa=(e,t,r)=>{let{prefix:n}=r;if(n!==G.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let c=r.encode(e).slice(1);return t.set(n,c),c}else return i},Ja=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let c=r.encode(e);return t.set(n,c),c}else return i},se=112,Xa=18,Pn=(e,t,r)=>{let n=zt(e),i=n+zt(t),c=new Uint8Array(i+r.byteLength);return Vt(e,c,0),Vt(t,c,n),c.set(r,i),c},$n=Symbol.for("@ipld/js-cid/CID"),Ce={writable:!1,configurable:!1,enumerable:!0},xe={writable:!1,enumerable:!1,configurable:!1},Ya="0.0.0-dev",Qa=(e,t)=>{if(e.test(Ya))console.warn(t);else throw new Error(t)},Ka=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var Cr={...ir,...ar,...ur,...cr,...fr,...pr,...lr,...hr,...mr,...Dr},cf={...vr,...Er};function Se(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function _n(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var kn=_n("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),xr=_n("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Se(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),tu={utf8:kn,"utf-8":kn,hex:Cr.base16,latin1:xr,ascii:xr,binary:xr,...Cr},Te=tu;function Q(e,t="utf8"){let r=Te[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var Nn=yn,eu=bn,Sr=function(e){let t=0,r;if(Nn(e))r=new Uint8Array(t+4),e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255});else if(eu(e)){let n=e.split(":",8),i;for(i=0;i<n.length;i++){let c=Nn(n[i]),f;c&&(f=Sr(n[i]),n[i]=Q(f.slice(0,2),"base16")),f!=null&&++i<8&&n.splice(i,0,Q(f.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(i=0;i<n.length&&n[i]!=="";i++);let c=[i,1];for(i=9-n.length;i>0;i--)c.push("0");n.splice.apply(n,c)}for(r=new Uint8Array(t+16),i=0;i<n.length;i++){let c=parseInt(n[i],16);r[t++]=c>>8&255,r[t++]=c&255}}if(r==null)throw Error("Invalid ip address: "+e);return r},Ln=function(e,t,r){t=~~t,r=r??e.length-t;let n=[],i="",c=new DataView(e.buffer);if(r===4){for(let f=0;f<r;f++)n.push(e[t+f]);i=n.join(".")}else if(r===16){for(let f=0;f<r;f+=2)n.push(c.getUint16(t+f).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};var oe={},Tr={},nu=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];nu.forEach(e=>{let t=su(...e);Tr[t.code]=t,oe[t.name]=t});function su(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}function I(e){if(typeof e=="number"){if(Tr[e]!=null)return Tr[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(oe[e]!=null)return oe[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var Ot=V(Ae(),1);function Ir(e,t="utf8"){let r=Te[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function xt(e,t){t||(t=e.reduce((i,c)=>i+c.length,0));let r=Se(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return r}function Yn(e,t){switch(I(e).code){case 4:case 41:return bu(t);case 6:case 273:case 33:case 132:return Kn(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return wu(t);case 421:return Eu(t);case 444:return Xn(t);case 445:return Xn(t);default:return Q(t,"base16")}}function Qn(e,t){switch(I(e).code){case 4:return Jn(t);case 41:return Jn(t);case 6:case 273:case 33:case 132:return Rr(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return yu(t);case 421:return vu(t);case 444:return Cu(t);case 445:return xu(t);default:return Ir(t,"base16")}}function Jn(e){if(!we(e))throw new Error("invalid ip address");return Sr(e)}function bu(e){let t=Ln(e,0,e.length);if(t==null||!we(t))throw new Error("invalid ip address");return t}function Rr(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Kn(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function yu(e){let t=Ir(e),r=Uint8Array.from(Ot.default.encode(t.length));return xt([r,t],r.length+t.length)}function wu(e){let t=Ot.default.decode(e);if(e=e.slice(Ot.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Q(e)}function vu(e){let t;e[0]==="Q"||e[0]==="1"?t=Ee(G.decode(`z${e}`)).bytes:t=F.parse(e).multihash.bytes;let r=Uint8Array.from(Ot.default.encode(t.length));return xt([r,t],r.length+t.length)}function Eu(e){let t=Ot.default.decode(e),r=e.slice(Ot.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return Q(r,"base58btc")}function Cu(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=dt.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Rr(n);return xt([r,i],r.length+i.length)}function xu(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=dt.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Rr(n);return xt([r,i],r.length+i.length)}function Xn(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=Q(t,"base32"),i=Kn(r);return`${n}:${i}`}var Ht=V(Ae(),1);function Su(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],c=I(i);if(c.size===0){t.push([i]);continue}if(n++,n>=r.length)throw es("invalid address: "+e);if(c.path===!0){t.push([i,Pr(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}function Tu(e){let t=[];return e.map(r=>{let n=Re(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),Pr(t.join("/"))}function Au(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=Re(t);return t.length>1?[r.code,Qn(r.code,t[1])]:[r.code]})}function Mr(e){return e.map(t=>{let r=Re(t);return t[1]!=null?[r.code,Yn(r.code,t[1])]:[r.code]})}function Fr(e){return Ie(xt(e.map(t=>{let r=Re(t),n=Uint8Array.from(Ht.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=xt([n,t[1]])),n})))}function Or(e,t){return e.size>0?e.size/8:e.size===0?0:Ht.default.decode(t)+Ht.default.decode.bytes}function ie(e){let t=[],r=0;for(;r<e.length;){let n=Ht.default.decode(e,r),i=Ht.default.decode.bytes,c=I(n),f=Or(c,e.slice(r+i));if(f===0){t.push([n]),r+=i;continue}let h=e.slice(r+i,r+i+f);if(r+=f+i,r>e.length)throw es("Invalid address Uint8Array: "+Q(e,"base16"));t.push([n,h])}return t}function Be(e){let t=ie(e),r=Mr(t);return Tu(r)}function Bu(e){e=Pr(e);let t=Su(e),r=Au(t);return Fr(r)}function ts(e){return Bu(e)}function Ie(e){let t=Iu(e);if(t!=null)throw t;return Uint8Array.from(e)}function Iu(e){try{ie(e)}catch(t){return t}}function Pr(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function es(e){return new Error("Error parsing address: "+e)}function Re(e){return I(e[0])}var $r=V(Ae(),1);var as=V(Me(),1);function ss(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var Fu=Symbol.for("nodejs.util.inspect.custom"),Ou=[I("ip4").code,I("ip6").code],Fe=[I("dns").code,I("dns4").code,I("dns6").code,I("dnsaddr").code],os=[I("p2p").code,I("ipfs").code],Pu=[I("tcp").code,I("udp").code],us=new Map,is=Symbol.for("@multiformats/js-multiaddr/multiaddr"),k=class{constructor(t){if(t==null&&(t=""),Object.defineProperty(this,is,{value:!0}),t instanceof Uint8Array)this.bytes=Ie(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=ts(t)}else if(k.isMultiaddr(t))this.bytes=Ie(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Be(this.bytes)}toJSON(){return this.toString()}toOptions(){let t=this.protoCodes(),r=this.toString().split("/").slice(1),n,i;if(r.length>2)Fe.includes(t[0])&&os.includes(t[1])?(n=I("tcp").name,i=443):(n=I(r[2]).name,i=parseInt(r[3]));else if(Fe.includes(t[0]))n=I("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t[0]===41||t[0]===55?6:4,host:r[1],transport:n,port:i}}protos(){return this.protoCodes().map(t=>Object.assign({},I(t)))}protoCodes(){let t=[],r=this.bytes,n=0;for(;n<r.length;){let i=$r.default.decode(r,n),c=$r.default.decode.bytes,f=I(i);n+=Or(f,r.slice(n+c))+c,t.push(i)}return t}protoNames(){return this.protos().map(t=>t.name)}tuples(){return ie(this.bytes)}stringTuples(){let t=ie(this.bytes);return Mr(t)}encapsulate(t){return t=new k(t),new k(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new k(n.slice(0,i))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new k(Fr(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===oe.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?Q(G.decode(`z${n}`),"base58btc"):Q(F.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let t=null;try{t=this.stringTuples().filter(r=>I(r[0]).path===!0)[0][1],t==null&&(t=null)}catch{t=null}return t}equals(t){return ss(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(c=>c.resolvable);if(r==null)return[this];let n=us.get(r.name);if(n==null)throw(0,as.default)(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(c=>new k(c))}nodeAddress(){let t=this.protoCodes(),r=this.protoNames(),n=this.toString().split("/").slice(1),i=I(n[2]).code,c=parseInt(n[3]);if(Fe.includes(t[0])&&os.includes(t[1])&&(i=I("tcp").code,c=443),n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');if(!Ou.includes(t[0])&&!Fe.includes(t[0]))throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns, dns4, dns6, dnsaddr}".`);if(!Pu.includes(i))throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:t[0]===41||t[0]===55?6:4,address:n[1],port:c}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(t,r){if(t==null)throw new Error("requires node address object");if(r==null)throw new Error("requires transport protocol");let n;switch(t.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new k("/"+[n,t.address,r,t.port].join("/"))}static isName(t){return k.isMultiaddr(t)?t.protos().some(r=>r.resolvable):!1}static isMultiaddr(t){return Boolean(t?.[is])}[Fu](){return"<Multiaddr "+Q(this.bytes,"base16")+" - "+Be(this.bytes)+">"}inspect(){return"<Multiaddr "+Q(this.bytes,"base16")+" - "+Be(this.bytes)+">"}};k.resolvers=us;var $u=E("dns4"),ku=E("dns6"),_u=E("dnsaddr"),Zt=H(E("dns"),_u,$u,ku),Oe=H(E("ip4"),E("ip6")),Pt=H(S(Oe,E("tcp")),S(Zt,E("tcp"))),fs=S(Oe,E("udp")),Nu=S(fs,E("utp")),Lu=S(fs,E("quic")),ue=H(S(Pt,E("ws")),S(Zt,E("ws"))),ce=H(S(Pt,E("wss")),S(Zt,E("wss"))),kr=H(S(Pt,E("http")),S(Oe,E("http")),S(Zt,E("http"))),_r=H(S(Pt,E("https")),S(Oe,E("https")),S(Zt,E("https"))),ps=H(S(ue,E("p2p-webrtc-star"),E("p2p")),S(ce,E("p2p-webrtc-star"),E("p2p")),S(ue,E("p2p-webrtc-star")),S(ce,E("p2p-webrtc-star"))),Xf=H(S(ue,E("p2p-websocket-star"),E("p2p")),S(ce,E("p2p-websocket-star"),E("p2p")),S(ue,E("p2p-websocket-star")),S(ce,E("p2p-websocket-star"))),ls=H(S(kr,E("p2p-webrtc-direct"),E("p2p")),S(_r,E("p2p-webrtc-direct"),E("p2p")),S(kr,E("p2p-webrtc-direct")),S(_r,E("p2p-webrtc-direct"))),fe=H(ue,ce,kr,_r,ps,ls,Pt,Nu,Lu,Zt),Yf=H(S(fe,E("p2p-stardust"),E("p2p")),S(fe,E("p2p-stardust"))),St=H(S(fe,E("p2p")),ps,ls,E("p2p")),cs=H(S(St,E("p2p-circuit"),St),S(St,E("p2p-circuit")),S(E("p2p-circuit"),St),S(fe,E("p2p-circuit")),S(E("p2p-circuit"),fe),E("p2p-circuit")),hs=()=>H(S(cs,hs),cs),ae=hs(),Qf=H(S(ae,St,ae),S(St,ae),S(ae,St),ae,St);function ds(e){function t(r){let n;try{n=new k(r)}catch{return!1}let i=e(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return t}function S(...e){function t(r){if(r.length<e.length)return null;let n=r;return e.some(i=>(n=typeof i=="function"?i().partialMatch(r):i.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:ds(t),partialMatch:t}}function H(...e){function t(n){let i=null;return e.some(c=>{let f=typeof c=="function"?c().partialMatch(n):c.partialMatch(n);return f!=null?(i=f,!0):!1}),i}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:ds(t),partialMatch:t}}function E(e){let t=e;function r(i){let c;try{c=new k(i)}catch{return!1}let f=c.protoNames();return f.length===1&&f[0]===t}function n(i){return i.length===0?null:i[0]===t?i.slice(1):null}return{toString:function(){return t},matches:r,partialMatch:n}}var eo=V(Me(),1);var mt=V(Ts(),1);mt.default.formatters.b=e=>e==null?"undefined":G.baseEncode(e);mt.default.formatters.t=e=>e==null?"undefined":dt.baseEncode(e);mt.default.formatters.m=e=>e==null?"undefined":dr.baseEncode(e);mt.default.formatters.p=e=>e==null?"undefined":e.toString();mt.default.formatters.c=e=>e==null?"undefined":e.toString();mt.default.formatters.k=e=>e==null?"undefined":e.toString();function At(e){return Object.assign((0,mt.default)(e),{error:(0,mt.default)(`${e}:error`),trace:(0,mt.default)(`${e}:trace`)})}var pe=class extends Error{constructor(t,r){super(t??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function As(e){if(e!=null){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}function Vr(e,t,r){let n=r??{},i=As(e);async function*c(){let f,h=()=>{f?.()};for(t.addEventListener("abort",h);;){let m;try{if(t.aborted){let{abortMessage:p,abortCode:b}=n;throw new pe(p,b)}let w=new Promise((p,b)=>{f=()=>{let{abortMessage:v,abortCode:C}=n;b(new pe(v,C))}});m=await Promise.race([w,i.next()]),f=null}catch(w){t.removeEventListener("abort",h);let p=w.type==="aborted"&&t.aborted;if(p&&n.onAbort!=null&&await n.onAbort(e),typeof i.return=="function")try{let b=i.return();b instanceof Promise&&b.catch(v=>{n.onReturnError!=null&&n.onReturnError(v)})}catch(b){n.onReturnError!=null&&n.onReturnError(b)}if(p&&n.returnOnAbort===!0)return;throw w}if(m.done===!0)break;yield m.value}t.removeEventListener("abort",h)}return c()}var Js=V($s(),1);var He=V(Me(),1);function Le(e){return this.subnetMask<e.subnetMask?!1:this.mask(e.subnetMask)===e.mask()}function Ue(e){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===e&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}var Qt=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,Gr=/\/\d{1,2}$/;var Z=class extends Error{constructor(t,r){super(t),this.name="AddressError",r!==null&&(this.parseMessage=r)}};var Kt=V(Hr(),1),kt=V(le(),1),M=class{constructor(t){this.groups=4,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=Ue(32),this.isInSubnet=Le,this.address=t;let r=Gr.exec(t);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>32)throw new Z("Invalid subnet mask.");t=t.replace(Gr,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new M(t),!0}catch{return!1}}parse(t){let r=t.split(".");if(!t.match(Qt))throw new Z("Invalid IPv4 address.");return r}correctForm(){return this.parsedAddress.map(t=>parseInt(t,10)).join(".")}static fromHex(t){let r=t.replace(/:/g,"").padStart(8,"0"),n=[],i;for(i=0;i<8;i+=2){let c=r.slice(i,i+2);n.push(parseInt(c,16))}return new M(n.join("."))}static fromInteger(t){return M.fromHex(t.toString(16))}static fromArpa(t){let n=t.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new M(n)}toHex(){return this.parsedAddress.map(t=>(0,kt.sprintf)("%02x",parseInt(t,10))).join(":")}toArray(){return this.parsedAddress.map(t=>parseInt(t,10))}toGroup6(){let t=[],r;for(r=0;r<4;r+=2){let n=(0,kt.sprintf)("%02x%02x",parseInt(this.parsedAddress[r],10),parseInt(this.parsedAddress[r+1],10));t.push((0,kt.sprintf)("%x",parseInt(n,16)))}return t.join(":")}bigInteger(){return new Kt.BigInteger(this.parsedAddress.map(t=>(0,kt.sprintf)("%02x",parseInt(t,10))).join(""),16)}_startAddress(){return new Kt.BigInteger(this.mask()+"0".repeat(32-this.subnetMask),2)}startAddress(){return M.fromBigInteger(this._startAddress())}startAddressExclusive(){let t=new Kt.BigInteger("1");return M.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new Kt.BigInteger(this.mask()+"1".repeat(32-this.subnetMask),2)}endAddress(){return M.fromBigInteger(this._endAddress())}endAddressExclusive(){let t=new Kt.BigInteger("1");return M.fromBigInteger(this._endAddress().subtract(t))}static fromBigInteger(t){return M.fromInteger(parseInt(t.toString(),10))}mask(t){return t===void 0&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}reverseForm(t){t||(t={});let r=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?r:(0,kt.sprintf)("%s.in-addr.arpa.",r)}isMulticast(){return this.isInSubnet(new M("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(32,"0")}groupForV6(){let t=this.parsedAddress;return this.address.replace(Qt,(0,kt.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',t.slice(0,2).join("."),t.slice(2,4).join(".")))}};var Us={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},Zr={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},Wr=/([^0-9a-f:/%])/gi,Jr=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,Xr=/\/\d{1,3}(?=%|$)/,Yr=/%.*$/,js=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),Vs=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/);var qs=V(le(),1);function hc(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}function ze(e,t=0){return e.split(":").map((n,i)=>/group-v4/.test(n)?n:(0,qs.sprintf)('<span class="hover-group group-%d">%s</span>',i+t,hc(n)))}var Nt=V(le(),1);function Kr(e){return(0,Nt.sprintf)("(%s)",e.join("|"))}function Qr(e){return e.length<4?(0,Nt.sprintf)("0{0,%d}%s",4-e.length,e):e}var tn="[^A-Fa-f0-9:]";function qe(e){let t=[];e.forEach((n,i)=>{parseInt(n,16)===0&&t.push(i)});let r=t.map(n=>e.map((i,c)=>{if(c===n){let f=c===0||c===8-1?":":"";return Kr([Qr(i),f])}return Qr(i)}).join(":"));return r.push(e.map(Qr).join(":")),Kr(r)}function en(e,t,r){let n=t?"":":",i=r?"":":",c=[];!t&&!r&&c.push("::"),t&&r&&c.push(""),(r&&!t||!r&&t)&&c.push(":"),c.push((0,Nt.sprintf)("%s(:0{1,4}){1,%d}",n,e-1)),c.push((0,Nt.sprintf)("(0{1,4}:){1,%d}%s",e-1,i)),c.push((0,Nt.sprintf)("(0{1,4}:){%d}0{1,4}",e-1));for(let f=1;f<e-1;f++)for(let h=1;h<e-f;h++)c.push((0,Nt.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",h,e-h-f-1));return Kr(c)}var W=V(Hr(),1),J=V(le(),1);function Ge(e){if(!e)throw new Error("Assertion failed.")}function dc(e){let t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}function mc(e){return e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),e=e.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),e}function Dc(e,t){let r=[],n=[],i;for(i=0;i<e.length;i++)i<t[0]?r.push(e[i]):i>t[1]&&n.push(e[i]);return r.concat(["compact"]).concat(n)}function Hs(e){return(0,J.sprintf)("%04x",parseInt(e,16))}function Zs(e){return e&255}var P=class{constructor(t,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=Le,this.isCorrect=Ue(128),r===void 0?this.groups=8:this.groups=r,this.address=t;let n=Xr.exec(t);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>128)throw new Z("Invalid subnet mask.");t=t.replace(Xr,"")}else if(/\//.test(t))throw new Z("Invalid subnet mask.");let i=Yr.exec(t);i&&(this.zone=i[0],t=t.replace(Yr,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new P(t),!0}catch{return!1}}static fromBigInteger(t){let r=t.toString(16).padStart(32,"0"),n=[],i;for(i=0;i<8;i++)n.push(r.slice(i*4,(i+1)*4));return new P(n.join(":"))}static fromURL(t){let r,n=null,i;if(t.indexOf("[")!==-1&&t.indexOf("]:")!==-1){if(i=Vs.exec(t),i===null)return{error:"failed to parse address with port",address:null,port:null};r=i[1],n=i[2]}else if(t.indexOf("/")!==-1){if(t=t.replace(/^[a-z0-9]+:\/\//,""),i=js.exec(t),i===null)return{error:"failed to parse address from URL",address:null,port:null};r=i[1]}else r=t;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new P(r),port:n}}static fromAddress4(t){let r=new M(t),n=128-(32-r.subnetMask);return new P(`::ffff:${r.correctForm()}/${n}`)}static fromArpa(t){let r=t.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(r.length!==63)throw new Z("Invalid 'ip6.arpa' form.");let i=r.split(".").reverse();for(let c=n;c>0;c--){let f=c*4;i.splice(f,0,":")}return r=i.join(""),new P(r)}microsoftTranscription(){return(0,J.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(t=this.subnetMask){return this.getBitsBase2(0,t)}possibleSubnets(t=128){let r=128-this.subnetMask,n=Math.abs(t-128),i=r-n;return i<0?"0":dc(new W.BigInteger("2",10).pow(i).toString(10))}_startAddress(){return new W.BigInteger(this.mask()+"0".repeat(128-this.subnetMask),2)}startAddress(){return P.fromBigInteger(this._startAddress())}startAddressExclusive(){let t=new W.BigInteger("1");return P.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new W.BigInteger(this.mask()+"1".repeat(128-this.subnetMask),2)}endAddress(){return P.fromBigInteger(this._endAddress())}endAddressExclusive(){let t=new W.BigInteger("1");return P.fromBigInteger(this._endAddress().subtract(t))}getScope(){let t=Us[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&t!=="Link local"&&(t="Global"),t||"Unknown"}getType(){for(let t of Object.keys(Zr))if(this.isInSubnet(new P(t)))return Zr[t];return"Global unicast"}getBits(t,r){return new W.BigInteger(this.getBitsBase2(t,r),2)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}getBitsBase16(t,r){let n=r-t;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,r).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,128)}reverseForm(t){t||(t={});let r=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?t.omitSuffix?n:(0,J.sprintf)("%s.ip6.arpa.",n):t.omitSuffix?"":"ip6.arpa."}correctForm(){let t,r=[],n=0,i=[];for(t=0;t<this.parsedAddress.length;t++){let h=parseInt(this.parsedAddress[t],16);h===0&&n++,h!==0&&n>0&&(n>1&&i.push([t-n,t-1]),n=0)}n>1&&i.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);let c=i.map(h=>h[1]-h[0]+1);if(i.length>0){let h=c.indexOf(Math.max(...c));r=Dc(this.parsedAddress,i[h])}else r=this.parsedAddress;for(t=0;t<r.length;t++)r[t]!=="compact"&&(r[t]=parseInt(r[t],16).toString(16));let f=r.join(":");return f=f.replace(/^compact$/,"::"),f=f.replace(/^compact|compact$/,":"),f=f.replace(/compact/,""),f}binaryZeroPad(){return this.bigInteger().toString(2).padStart(128,"0")}parse4in6(t){let r=t.split(":"),i=r.slice(-1)[0].match(Qt);if(i){this.parsedAddress4=i[0],this.address4=new M(this.parsedAddress4);for(let c=0;c<this.address4.groups;c++)if(/^0[0-9]+/.test(this.address4.parsedAddress[c]))throw new Z("IPv4 addresses can't have leading zeroes.",t.replace(Qt,this.address4.parsedAddress.map(mc).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),t=r.join(":")}return t}parse(t){t=this.parse4in6(t);let r=t.match(Wr);if(r)throw new Z((0,J.sprintf)("Bad character%s detected in address: %s",r.length>1?"s":"",r.join("")),t.replace(Wr,'<span class="parse-error">$1</span>'));let n=t.match(Jr);if(n)throw new Z((0,J.sprintf)("Address failed regex: %s",n.join("")),t.replace(Jr,'<span class="parse-error">$1</span>'));let i=[],c=t.split("::");if(c.length===2){let f=c[0].split(":"),h=c[1].split(":");f.length===1&&f[0]===""&&(f=[]),h.length===1&&h[0]===""&&(h=[]);let m=this.groups-(f.length+h.length);if(!m)throw new Z("Error parsing groups");this.elidedGroups=m,this.elisionBegin=f.length,this.elisionEnd=f.length+this.elidedGroups,i=i.concat(f);for(let w=0;w<m;w++)i.push("0");i=i.concat(h)}else if(c.length===1)i=t.split(":"),this.elidedGroups=0;else throw new Z("Too many :: groups found");if(i=i.map(f=>(0,J.sprintf)("%x",parseInt(f,16))),i.length!==this.groups)throw new Z("Incorrect number of groups found");return i}canonicalForm(){return this.parsedAddress.map(Hs).join(":")}decimal(){return this.parsedAddress.map(t=>(0,J.sprintf)("%05d",parseInt(t,16))).join(":")}bigInteger(){return new W.BigInteger(this.parsedAddress.map(Hs).join(""),16)}to4(){let t=this.binaryZeroPad().split("");return M.fromHex(new W.BigInteger(t.slice(96,128).join(""),2).toString(16))}to4in6(){let t=this.to4(),n=new P(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),i="";return/:$/.test(n)||(i=":"),n+i+t.address}inspectTeredo(){let t=this.getBitsBase16(0,32),r=this.getBits(80,96).xor(new W.BigInteger("ffff",16)).toString(),n=M.fromHex(this.getBitsBase16(32,64)),i=M.fromHex(this.getBits(96,128).xor(new W.BigInteger("ffffffff",16)).toString(16)),c=this.getBits(64,80),f=this.getBitsBase2(64,80),h=c.testBit(15),m=c.testBit(14),w=c.testBit(8),p=c.testBit(9),b=new W.BigInteger(f.slice(2,6)+f.slice(8,16),2).toString(10);return{prefix:(0,J.sprintf)("%s:%s",t.slice(0,4),t.slice(4,8)),server4:n.address,client4:i.address,flags:f,coneNat:h,microsoft:{reserved:m,universalLocal:p,groupIndividual:w,nonce:b},udpPort:r}}inspect6to4(){let t=this.getBitsBase16(0,16),r=M.fromHex(this.getBitsBase16(16,48));return{prefix:(0,J.sprintf)("%s",t.slice(0,4)),gateway:r.address}}to6to4(){if(!this.is4())return null;let t=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new P(t)}toByteArray(){let t=this.bigInteger().toByteArray();return t.length===17&&t[0]===0?t.slice(1):t}toUnsignedByteArray(){return this.toByteArray().map(Zs)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(Zs))}static fromUnsignedByteArray(t){let r=new W.BigInteger("256",10),n=new W.BigInteger("0",10),i=new W.BigInteger("1",10);for(let c=t.length-1;c>=0;c--)n=n.add(i.multiply(new W.BigInteger(t[c].toString(10),10))),i=i.multiply(r);return P.fromBigInteger(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new P("2001::/32"))}is6to4(){return this.isInSubnet(new P("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(t){return t===void 0?t="":t=(0,J.sprintf)(":%s",t),(0,J.sprintf)("http://[%s]%s/",this.correctForm(),t)}link(t){t||(t={}),t.className===void 0&&(t.className=""),t.prefix===void 0&&(t.prefix="/#address="),t.v4===void 0&&(t.v4=!1);let r=this.correctForm;return t.v4&&(r=this.to4in6),t.className?(0,J.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',t.prefix,r.call(this),t.className):(0,J.sprintf)('<a href="%1$s%2$s">%2$s</a>',t.prefix,r.call(this))}group(){if(this.elidedGroups===0)return ze(this.address).join(":");Ge(typeof this.elidedGroups=="number"),Ge(typeof this.elisionBegin=="number");let t=[],[r,n]=this.address.split("::");r.length?t.push(...ze(r)):t.push("");let i=["hover-group"];for(let c=this.elisionBegin;c<this.elisionBegin+this.elidedGroups;c++)i.push((0,J.sprintf)("group-%d",c));return t.push((0,J.sprintf)('<span class="%s"></span>',i.join(" "))),n.length?t.push(...ze(n,this.elisionEnd)):t.push(""),this.is4()&&(Ge(this.address4 instanceof M),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(t=!1){let r=[],n=new P(this.correctForm());if(n.elidedGroups===0)r.push(qe(n.parsedAddress));else if(n.elidedGroups===8)r.push(en(8));else{let i=n.address.split("::");i[0].length&&r.push(qe(i[0].split(":"))),Ge(typeof n.elidedGroups=="number"),r.push(en(n.elidedGroups,i[0].length!==0,i[1].length!==0)),i[1].length&&r.push(qe(i[1].split(":"))),r=[r.join(":")]}return t||(r=["(?=^|",tn,"|[^\\w\\:])(",...r,")(?=[^\\w\\:]|",tn,"|$)"]),r.join("")}regularExpression(t=!1){return new RegExp(this.regularExpressionString(t),"i")}};var gc=At("libp2p:ip-port-to-multiaddr"),rn={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function Ws(e,t){if(typeof e!="string")throw(0,He.default)(new Error(`invalid ip provided: ${e}`),rn.ERR_INVALID_IP_PARAMETER);if(typeof t=="string"&&(t=parseInt(t)),isNaN(t))throw(0,He.default)(new Error(`invalid port provided: ${t}`),rn.ERR_INVALID_PORT_PARAMETER);try{return new M(e),new k(`/ip4/${e}/tcp/${t}`)}catch{}try{let r=new P(e);return r.is4()?new k(`/ip4/${r.to4().correctForm()}/tcp/${t}`):new k(`/ip6/${e}/tcp/${t}`)}catch{let n=`invalid ip:port for creating a multiaddr: ${e}:${t}`;throw gc.error(n),(0,He.default)(new Error(n),rn.ERR_INVALID_IP)}}var nn=At("libp2p:tcp:socket"),Ze=(e,t)=>{t=t??{},t.listeningAddr?.getPath()!=null&&(t.remoteAddr=t.listeningAddr),t.remoteAddr?.getPath()!=null&&(t.localAddr=t.remoteAddr);let{sink:r,source:n}=Js.default.duplex(e),i={async sink(c){t?.signal!=null&&(c=Vr(c,t.signal));try{await r(async function*(){for await(let f of c)yield Buffer.isBuffer(f)?f:f.slice()}())}catch(f){f.type!=="aborted"&&nn(f)}},source:t.signal!=null?Vr(n,t.signal):n,remoteAddr:t.remoteAddr??Ws(e.remoteAddress??"",e.remotePort??""),timeline:{open:Date.now()},async close(){if(!e.destroyed)return await new Promise((c,f)=>{let h=Date.now(),m=setTimeout(()=>{let{host:w,port:p}=i.remoteAddr.toOptions();nn("timeout closing socket to %s:%s after %dms, destroying it manually",w,p,Date.now()-h),e.destroyed?nn("%s:%s is already destroyed",w,p):e.destroy(),c()},2e3).unref();e.once("close",()=>{clearTimeout(m),c()}),e.end(w=>{if(w!=null)return f(w);clearTimeout(m),i.timeline.close=Date.now(),c()})})}};return e.once("close",()=>{i.timeline.close==null&&(i.timeline.close=Date.now())}),i};var Ys=V(vt("net"),1);var Xs=V(vt("os"),1),yc={ip4:"IPv4",ip6:"IPv6"};function We(e){if(e.getPath()!=null)throw new Error("Unix Sockets are not supported by the TCP transport");return e.toOptions()}function sn(e,t,r){let n=i=>new k(`/${e}/${i}/tcp/${r}`);return(wc(t)?Ec(yc[e]):[t]).map(n)}function wc(e){return["0.0.0.0","::"].includes(e)}var vc=Xs.default.networkInterfaces();function Ec(e){let t=[];for(let[,r]of Object.entries(vc))if(r!=null)for(let n of r)n.family===e&&t.push(n.address);return t}var Lt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},yt,Je=class extends EventTarget{constructor(){super(...arguments),yt.set(this,new Map)}listenerCount(t){let r=Lt(this,yt,"f").get(t);return r==null?0:r.length}addEventListener(t,r,n){super.addEventListener(t,r,n);let i=Lt(this,yt,"f").get(t);i==null&&(i=[],Lt(this,yt,"f").set(t,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(t,r,n){super.removeEventListener(t.toString(),r??null,n);let i=Lt(this,yt,"f").get(t);i!=null&&(i=i.filter(({callback:c})=>c!==r),Lt(this,yt,"f").set(t,i))}dispatchEvent(t){let r=super.dispatchEvent(t),n=Lt(this,yt,"f").get(t.type);return n==null||(n=n.filter(({once:i})=>!i),Lt(this,yt,"f").set(t.type,n)),r}};yt=new WeakMap;var on=class extends Event{constructor(t,r){super(t,r),this.detail=r?.detail}},he=globalThis.CustomEvent??on;var Dt=At("libp2p:tcp:listener");async function an(e){try{await e.close()}catch(t){Dt.error("an error occurred closing the connection",t)}}function Qs(e){let{handler:t,upgrader:r}=e,n,i,c=Object.assign(Ys.default.createServer(h=>{h.on("error",w=>{Dt("socket error",w)});let m;try{m=Ze(h,{listeningAddr:i})}catch(w){Dt.error("inbound connection failed",w);return}Dt("new inbound connection %s",m.remoteAddr);try{r.upgradeInbound(m).then(w=>{Dt("inbound connection %s upgraded",m.remoteAddr),Cc(c,m,h),t?.(w),f.dispatchEvent(new he("connection",{detail:w}))}).catch(async w=>{Dt.error("inbound connection failed",w),await an(m)}).catch(w=>{Dt.error("closing inbound connection failed",w)})}catch(w){Dt.error("inbound connection failed",w),an(m).catch(p=>{Dt.error("closing inbound connection failed",p)})}}),{__connections:[]}),f=Object.assign(new Je,{getAddrs:()=>{let h=[],m=c.address();if(m==null)return[];if(typeof m=="string")throw new Error("Incorrect server address type");return i.toString().startsWith("/ip4")?h=h.concat(sn("ip4",m.address,m.port)):m.family==="IPv6"&&(h=h.concat(sn("ip6",m.address,m.port))),h.map(w=>n!=null?w.encapsulate(`/p2p/${n}`):w)},listen:async h=>(i=h,n=h.getPeerId(),n==null&&(i=h.decapsulateCode(421)),await new Promise((m,w)=>{let p=We(i);c.listen(p,b=>{if(b!=null)return w(b);Dt("Listening on %s",c.address()),m()})})),close:async()=>{!c.listening||(await Promise.all([c.__connections.map(async h=>await an(h))]),await new Promise((h,m)=>{c.close(w=>w!=null?m(w):h())}))}});return c.on("listening",()=>f.dispatchEvent(new he("listening"))).on("error",h=>f.dispatchEvent(new he("error",{detail:h}))).on("close",()=>f.dispatchEvent(new he("close"))),f}function Cc(e,t,r){e.__connections.push(t);let n=()=>{e.__connections=e.__connections.filter(i=>i!==t)};r.once("close",n)}var Bt=class extends Error{constructor(t="The operation was aborted"){super(t),this.code=Bt.code,this.type=Bt.type}static get code(){return"ABORT_ERR"}static get type(){return"aborted"}};var Ks=Symbol.for("@libp2p/transport");var Ut=At("libp2p:tcp"),cn=class{get[Ks](){return!0}get[Symbol.toStringTag](){return"@libp2p/tcp"}async dial(t,r){let n=await this._connect(t,r);n.on("error",f=>{Ut("socket error",f)});let i=Ze(n,{remoteAddr:t,signal:r.signal});Ut("new outbound connection %s",i.remoteAddr);let c=await r.upgrader.upgradeOutbound(i);return Ut("outbound connection %s upgraded",i.remoteAddr),c}async _connect(t,r={}){if(r.signal?.aborted===!0)throw new Bt;return await new Promise((n,i)=>{let c=Date.now(),f=We(t);Ut("dialing %j",f);let h=to.default.connect(f),m=C=>{C.message=`connection error ${f.host}:${f.port}: ${C.message}`,v(C)},w=()=>{Ut("connection timeout %s:%s",f.host,f.port);let C=(0,eo.default)(new Error(`connection timeout after ${Date.now()-c}ms`),"ERR_CONNECT_TIMEOUT");h.emit("error",C)},p=()=>{Ut("connection opened %j",f),v()},b=()=>{Ut("connection aborted %j",f),h.destroy(),v(new Bt)},v=C=>{if(h.removeListener("error",m),h.removeListener("timeout",w),h.removeListener("connect",p),r.signal!=null&&r.signal.removeEventListener("abort",b),C!=null)return i(C);n(h)};h.on("error",m),h.on("timeout",w),h.on("connect",p),r.signal!=null&&r.signal.addEventListener("abort",b)})}createListener(t){return Qs(t)}filter(t){return t=Array.isArray(t)?t:[t],t.filter(r=>r.protoCodes().includes(290)?!1:Pt.matches(r.decapsulateCode(421)))}};return Vi(Sc);})();
return Libp2PTcp}));
